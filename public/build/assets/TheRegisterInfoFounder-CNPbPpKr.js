import{j as p,h as F,c as i,b as z,u as x,d as e,n as b,t as r,f as O,e as h,v as _,l as d,q as B,g as $,F as R,i as A,o as u}from"./app-B5YizUfN.js";import{H as D}from"./index-CW21pWhN.js";import{d as k}from"./index-BCCQOF59.js";/* empty css            */const G={class:"bg-white shadow"},H={class:"max-w-7xl mx-auto py-6 px-4"},J={class:"flex items-center justify-between"},K={class:"flex items-center space-x-4"},Q={class:"flex items-center"},W={class:"ml-2"},X={class:"text-sm font-medium"},Y={class:"flex items-center"},Z={class:"max-w-7xl mx-auto py-6 px-4"},ee={key:0,class:"bg-white rounded-lg shadow p-6"},te={key:0,class:"mt-1 text-sm text-red-600"},se={key:0,class:"mt-1 text-sm text-red-600"},oe={key:0,class:"mt-1 text-sm text-red-600"},ae={key:0,class:"mt-1 text-sm text-red-600"},ne={key:1,class:"bg-white rounded-lg shadow"},le={class:"p-6 border-b border-gray-200"},re={class:"mt-4 space-y-4"},ie={class:"flex justify-between"},ue={class:"text-sm font-medium text-gray-900"},de={class:"flex justify-between"},me={class:"text-sm font-medium text-gray-900"},ce={class:"flex justify-between"},pe={class:"text-sm font-medium text-gray-900"},fe={class:"flex justify-between"},ve={class:"text-sm font-medium text-gray-900"},ye={class:"p-6"},ge={class:"mt-4 space-y-4"},be={class:"mt-6 p-4 bg-gray-50 rounded-lg"},xe={class:"flex justify-between items-center"},he={class:"text-lg font-bold text-gray-900"},_e={class:"text-sm text-gray-500"},we={key:0,class:"mt-6"},ke={key:1,class:"mt-6 space-y-4"},Ne=["onClick"],Me={class:"flex items-center justify-between"},Pe={class:"flex items-center space-x-3"},Ee=["src","alt"],je={class:"font-medium"},Fe={key:0,class:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},Re={class:"mt-6 flex justify-between"},Ie={__name:"TheRegisterInfoFounder",props:{fullName:{type:String,required:!0},amount:{type:[String,Number],default:0},amount_check:{type:[String,Number,Object],default:0},amount_eur:{type:[String,Number],default:0},id:{type:[String,Number],required:!0},auth:{type:Object,required:!0},hasExistingRegistration:{type:Boolean,default:!1},userInfo:{type:Object,default:()=>({email:"",phone_number:"",city:""})}},setup(f){var j;const l=f,m=p((j=l.auth)!=null&&j.user&&l.hasExistingRegistration?2:1),v=p(null),y=p(null),w=p(""),n=p({}),{email:N,phone_number:M,city:P}=l.userInfo,a=p({name:l.fullName||"",email:N||"",phone_number:M||"",city:P||"",amount:l.amount||0,thefind_id:l.id}),C=F(()=>{const s=parseFloat(l.amount);return new Intl.NumberFormat("fr-FR").format(s)}),S=F(()=>{const s=parseFloat(l.amount_eur);return new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR",minimumFractionDigits:2,maximumFractionDigits:2}).format(s)}),V=[{name:"Orange Money",provider:"orange",image:"/images/paiement/Orange_Money-Logo.svg"},{name:"MTN Mobile Money",provider:"mtn",image:"/images/paiement/MTN_Group-Logo.svg"},{name:"Afrikpay",provider:"afrikpay",image:"/images/paiement/afrikpay.png"}],L=()=>{n.value={};let s=!0;return a.value.name||(n.value.name="Le nom est requis",s=!1),a.value.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.value.email)||(n.value.email="L'email n'est pas valide",s=!1):(n.value.email="L'email est requis",s=!1),a.value.phone_number?/^[0-9]{9}$/.test(a.value.phone_number)||(n.value.phone_number="Le numéro de téléphone doit contenir 9 chiffres",s=!1):(n.value.phone_number="Le téléphone est requis",s=!1),a.value.city||(n.value.city="La ville est requise",s=!1),s},U=()=>{L()&&k.Inertia.post(route("found.store"),a.value,{preserveScroll:!0,onSuccess:()=>{m.value=2},onError:s=>{s.value=s}})},E=s=>{v.value=s,y.value=null,w.value="",s==="paypal"&&T()},I=s=>{y.value=s.provider,w.value=s.name},q=()=>{k.Inertia.post(route("afrikpay.store"),{...a.value,provider:y.value,amount:l.amount,thefind_id:l.id})},T=()=>{const s=(l.amount/655.957).toFixed(2);paypal.Buttons({createOrder:(t,c)=>c.order.create({purchase_units:[{amount:{currency_code:"EUR",value:s,breakdown:{item_total:{currency_code:"EUR",value:s}}},items:[{name:l.fullName,description:l.type_piece,unit_amount:{currency_code:"EUR",value:s},quantity:"1"}]}]}),onApprove:async(t,c)=>{try{const o=(await c.order.authorize()).purchase_units[0].payments.authorizations[0].id;k.Inertia.post(route("paypal.store",{id:o}),{...a.value,authorization_id:o,amount:s,currency:"EUR",sourcePayment:t.paymentSource,thefind_id:l.id})}catch(g){console.error("Erreur lors du traitement du paiement:",g)}},onError:t=>{console.error("Erreur PayPal:",t)}}).render("#paypal-button-container")};return(s,t)=>{var c,g;return u(),i(R,null,[z(x(D),{title:"Récupération - "+f.fullName},null,8,["title"]),e("header",G,[e("div",H,[e("div",J,[t[8]||(t[8]=e("div",null,[e("h1",{class:"text-2xl font-bold text-gray-900"},"Validation et Contact"),e("p",{class:"mt-1 text-sm text-gray-600"},"Finalisez la procédure pour entrer en contact avec le finder ")],-1)),e("div",K,[e("div",Q,[e("div",{class:b(["w-8 h-8 rounded-full flex items-center justify-center",[m.value>=1?"bg-blue-600 text-white":"bg-gray-200"]])}," 1 ",2),e("div",W,[e("p",X,r((c=f.auth)!=null&&c.user?"Connecté":"Informations"),1)])]),e("div",{class:b(["w-12 h-0.5",[m.value>=2?"bg-blue-600":"bg-gray-200"]])},null,2),e("div",Y,[e("div",{class:b(["w-8 h-8 rounded-full flex items-center justify-center",[m.value>=2?"bg-blue-600 text-white":"bg-gray-200"]])}," 2 ",2),t[7]||(t[7]=e("div",{class:"ml-2"},[e("p",{class:"text-sm font-medium"},"Paiement")],-1))])])])])]),e("main",Z,[m.value===1&&!((g=f.auth)!=null&&g.user)?(u(),i("div",ee,[e("form",{onSubmit:O(U,["prevent"]),class:"space-y-6"},[e("div",null,[t[9]||(t[9]=e("label",{for:"name",class:"block text-sm font-medium text-gray-700"},"Nom complet",-1)),h(e("input",{id:"name",type:"text","onUpdate:modelValue":t[0]||(t[0]=o=>a.value.name=o),required:"",class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[_,a.value.name]]),n.value.name?(u(),i("p",te,r(n.value.name),1)):d("",!0)]),e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700"},"Email",-1)),h(e("input",{type:"email","onUpdate:modelValue":t[1]||(t[1]=o=>a.value.email=o),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[_,a.value.email]]),n.value.email?(u(),i("p",se,r(n.value.email),1)):d("",!0)]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700"},"Téléphone",-1)),h(e("input",{type:"tel","onUpdate:modelValue":t[2]||(t[2]=o=>a.value.phone_number=o),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[_,a.value.phone_number]]),n.value.phone_number?(u(),i("p",oe,r(n.value.phone_number),1)):d("",!0)]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700"},"Ville",-1)),h(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=o=>a.value.city=o),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[_,a.value.city]]),n.value.city?(u(),i("p",ae,r(n.value.city),1)):d("",!0)]),t[13]||(t[13]=e("div",{class:"flex justify-end"},[e("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Continuer vers le paiement ")],-1))],32)])):m.value===2?(u(),i("div",ne,[e("div",le,[t[18]||(t[18]=e("h2",{class:"text-lg font-medium text-gray-900"},"Résumé de vos informations",-1)),e("dl",re,[e("div",ie,[t[14]||(t[14]=e("dt",{class:"text-sm text-gray-600"},"Nom",-1)),e("dd",ue,r(f.fullName),1)]),e("div",de,[t[15]||(t[15]=e("dt",{class:"text-sm text-gray-600"},"Email",-1)),e("dd",me,r(x(N)),1)]),e("div",ce,[t[16]||(t[16]=e("dt",{class:"text-sm text-gray-600"},"Téléphone",-1)),e("dd",pe,r(x(M)),1)]),e("div",fe,[t[17]||(t[17]=e("dt",{class:"text-sm text-gray-600"},"Ville",-1)),e("dd",ve,r(x(P)),1)])])]),e("div",ye,[t[24]||(t[24]=e("h2",{class:"text-lg font-medium text-gray-900"},"Choisissez votre mode de paiement",-1)),e("div",ge,[e("div",{class:b(["relative border rounded-lg p-4 hover:border-blue-500 cursor-pointer",{"border-blue-500 bg-blue-50":v.value==="mobile"}]),onClick:t[4]||(t[4]=o=>E("mobile"))},t[19]||(t[19]=[B('<div class="flex items-center space-x-4"><div class="flex space-x-2"><img src="/images/paiement/MTN_Group-Logo.svg" alt="MTN Money" class="w-12 h-12"><img src="/images/paiement/Orange_Money-Logo.svg" alt="Orange Money" class="w-12 h-12"></div><div><h3 class="font-medium text-gray-900">Paiement Mobile</h3><p class="text-sm text-gray-500">Orange Money, MTN Mobile Money</p></div></div>',1)]),2),e("div",{class:b(["relative border rounded-lg p-4 hover:border-blue-500 cursor-pointer",{"border-blue-500 bg-blue-50":v.value==="paypal"}]),onClick:t[5]||(t[5]=o=>E("paypal"))},t[20]||(t[20]=[e("div",{class:"flex items-center space-x-4"},[e("img",{src:"https://upload.wikimedia.org/wikipedia/commons/b/b5/PayPal.svg",alt:"PayPal",class:"w-24"}),e("div",null,[e("h3",{class:"font-medium text-gray-900"},"PayPal"),e("p",{class:"text-sm text-gray-500"},"Paiement sécurisé par PayPal")])],-1)]),2)]),e("div",be,[e("div",xe,[t[21]||(t[21]=e("span",{class:"text-sm font-medium text-gray-900"},"Montant à payer",-1)),e("span",he,[$(r(C.value)+" FCFA ",1),e("span",_e,"("+r(S.value)+" EUR)",1)])])]),v.value==="paypal"?(u(),i("div",we,t[22]||(t[22]=[e("div",{id:"paypal-button-container"},null,-1)]))):d("",!0),v.value==="mobile"?(u(),i("div",ke,[(u(),i(R,null,A(V,o=>e("div",{key:o.name,class:"border rounded-lg p-4 hover:bg-gray-50 cursor-pointer",onClick:Ce=>I(o)},[e("div",Me,[e("div",Pe,[e("img",{src:o.image,alt:o.name,class:"w-8 h-8"},null,8,Ee),e("span",je,r(o.name),1)]),y.value===o.provider?(u(),i("svg",Fe,t[23]||(t[23]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):d("",!0)])],8,Ne)),64)),y.value?(u(),i("button",{key:0,onClick:q,class:"w-full px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500"}," Payer avec "+r(w.value),1)):d("",!0)])):d("",!0),e("div",Re,[e("button",{onClick:t[6]||(t[6]=o=>m.value=1),class:"px-4 py-2 border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500"}," Modifier mes informations ")])])])):d("",!0)])],64)}}};export{Ie as default};
