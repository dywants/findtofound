import{C as _,j as k,c as i,b as D,w as C,u as o,d as t,f as P,t as d,l as a,e as p,v as x,F as f,i as S,o as l,m as j,W as F}from"./app-B5YizUfN.js";import"./index-CW21pWhN.js";import"./TheNavbar.vue_vue_type_style_index_0_scoped_fdbccefb_lang-DqQ99-wT.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";/* empty css            */import"./index-BCCQOF59.js";const T={class:"min-h-screen bg-gradient-to-b from-white to-blue-50"},B={class:"py-12"},U={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},V={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg mb-6"},L={class:"p-6 bg-white border-b border-gray-200"},N={class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md"},A={class:"space-y-1 text-center"},G={class:"flex text-sm text-gray-600"},H={class:"relative cursor-pointer bg-white rounded-md font-medium text-blue-600 hover:text-blue-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-blue-500"},W={key:0,class:"text-red-500 text-sm mt-1"},$={key:0,class:"text-red-500 text-sm mt-1"},q={key:0,class:"text-red-500 text-sm mt-1"},z={class:"flex justify-end"},E=["disabled"],I={class:"bg-white overflow-hidden shadow-sm sm:rounded-lg"},J={class:"p-6 bg-white border-b border-gray-200"},R={class:"overflow-x-auto"},K={class:"min-w-full divide-y divide-gray-200"},O={class:"bg-white divide-y divide-gray-200"},Q={class:"px-6 py-4 whitespace-nowrap"},X={class:"px-6 py-4 whitespace-nowrap"},Y={class:"px-6 py-4 whitespace-nowrap"},Z={class:"px-6 py-4 whitespace-nowrap text-sm font-medium"},tt=["onClick"],et=["onClick"],st={__name:"Protect",props:{documents:Array},setup(u){const c=u,s=_({document:null,watermark_text:"",purpose:""}),m=k(null),g=r=>{const e=r.target.files[0];e&&(s.document=e,m.value=e)},b=()=>{s.document&&s.post(route("documents.protect"),{preserveScroll:!0,onSuccess:()=>{s.reset(),m.value=null}})},w=r=>{window.location.href=route("documents.download",{id:r.id})},h=r=>{confirm("Êtes-vous sûr de vouloir supprimer ce document ?")&&F.delete(route("documents.destroy",{id:r.id}),{preserveScroll:!0,onSuccess:()=>{c.documents=c.documents.filter(e=>e.id!==r.id)}})},v=r=>{if(!r)return"";const e={year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"};return new Date(r).toLocaleDateString("fr-FR",e)};return(r,e)=>(l(),i(f,null,[D(o(j),null,{default:C(()=>e[2]||(e[2]=[t("title",null,"DocuTrace - Protection de Documents",-1),t("meta",{type:"description",content:"Protégez vos documents importants avec DocuTrace"},null,-1)])),_:1}),t("div",T,[t("div",B,[t("div",U,[t("div",V,[t("div",L,[t("form",{onSubmit:P(b,["prevent"]),class:"space-y-6"},[t("div",null,[e[6]||(e[6]=t("label",{class:"block text-sm font-medium text-gray-700"}," Document à protéger ",-1)),t("div",N,[t("div",A,[e[4]||(e[4]=t("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48"},[t("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),t("div",G,[t("label",H,[e[3]||(e[3]=t("span",null,"Téléverser un fichier",-1)),t("input",{type:"file",class:"sr-only",onChange:g,accept:".pdf,.jpg,.jpeg,.png"},null,32)])]),e[5]||(e[5]=t("p",{class:"text-xs text-gray-500"}," PDF, PNG, JPG jusqu'à 10MB ",-1))])]),o(s).errors.document?(l(),i("div",W,d(o(s).errors.document),1)):a("",!0)]),t("div",null,[e[7]||(e[7]=t("label",{for:"watermark",class:"block text-sm font-medium text-gray-700"}," Texte du filigrane ",-1)),p(t("input",{type:"text",id:"watermark","onUpdate:modelValue":e[0]||(e[0]=n=>o(s).watermark_text=n),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[x,o(s).watermark_text]]),o(s).errors.watermark_text?(l(),i("div",$,d(o(s).errors.watermark_text),1)):a("",!0)]),t("div",null,[e[8]||(e[8]=t("label",{for:"purpose",class:"block text-sm font-medium text-gray-700"}," Utilisation prévue ",-1)),p(t("input",{type:"text",id:"purpose","onUpdate:modelValue":e[1]||(e[1]=n=>o(s).purpose=n),class:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"},null,512),[[x,o(s).purpose]]),o(s).errors.purpose?(l(),i("div",q,d(o(s).errors.purpose),1)):a("",!0)]),t("div",z,[t("button",{type:"submit",disabled:o(s).processing,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"}," Protéger le document ",8,E)])],32)])]),t("div",I,[t("div",J,[e[10]||(e[10]=t("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Mes documents protégés",-1)),t("div",R,[t("table",K,[e[9]||(e[9]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Document "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Utilisation "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),t("tbody",O,[(l(!0),i(f,null,S(u.documents,n=>(l(),i("tr",{key:n.id},[t("td",Q,d(n.original_name),1),t("td",X,d(n.purpose),1),t("td",Y,d(v(n.created_at)),1),t("td",Z,[t("button",{onClick:y=>w(n),class:"text-blue-600 hover:text-blue-900 mr-4"}," Télécharger ",8,tt),t("button",{onClick:y=>h(n),class:"text-red-600 hover:text-red-900"}," Supprimer ",8,et)])]))),128))])])])])])])])])],64))}},at=M(st,[["__scopeId","data-v-80e25d77"]]);export{at as default};
