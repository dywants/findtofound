import{j as i,h as d,c as r,b as u,u as c,w as h,d as t,t as l,e as _,v as H,k as L,F as w,i as k,l as I,o as n,g as N,n as F}from"./app-B5YizUfN.js";import{H as R,L as C}from"./index-CW21pWhN.js";import{A as T,H as $}from"./AdminLayout-CqS92eh1.js";/* empty css            */import"./index-BCCQOF59.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./Dropdown-BuePBFZ2.js";const E={class:"flex space-x-2 text-sm"},O={class:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6"},U={class:"bg-white rounded-lg shadow-sm p-6"},J={class:"flex items-center"},Q={class:"ml-4"},q={class:"text-2xl font-bold"},G={class:"bg-white rounded-lg shadow-sm p-6"},K={class:"flex items-center"},W={class:"ml-4"},X={class:"text-2xl font-bold"},Y={class:"bg-white rounded-lg shadow-sm p-6"},Z={class:"flex items-center"},tt={class:"ml-4"},et={class:"text-2xl font-bold"},st={class:"bg-white rounded-lg shadow-sm p-6"},ot={class:"flex items-center"},lt={class:"ml-4"},rt={class:"text-2xl font-bold"},nt={class:"bg-white rounded-lg shadow-sm mb-6"},at={class:"p-6"},it={class:"flex flex-col md:flex-row md:items-center md:justify-between gap-4"},dt={class:"flex-1"},ut={class:"relative"},ct={class:"flex items-center space-x-4"},pt=["value"],xt={class:"bg-white rounded-lg shadow-sm overflow-hidden"},mt={class:"p-6"},gt={class:"overflow-x-auto"},vt={class:"w-full"},ht={class:"bg-white divide-y divide-gray-200"},wt={class:"px-6 py-4 whitespace-nowrap"},ft={class:"text-sm font-medium text-gray-900"},yt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},bt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},_t={class:"px-6 py-4 whitespace-nowrap"},kt=["src","onClick"],Ct={class:"px-6 py-4 whitespace-nowrap"},Mt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},jt={class:"px-6 py-4 whitespace-nowrap"},At={class:"text-sm text-gray-900"},Lt={class:"px-6 py-4 whitespace-nowrap"},Ft={class:"text-sm font-medium text-gray-900"},Bt={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Pt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium space-x-2"},zt=["onClick"],St={class:"flex items-center justify-between mt-6"},Vt={class:"text-sm text-gray-500"},Dt={class:"flex space-x-2"},Ht=["disabled"],It=["onClick"],Nt=["disabled"],Rt=["src"],Tt={layout:T},Gt=Object.assign(Tt,{__name:"Find",props:{finds:Array},setup(p){const f=p,x=i(""),m=i("all"),g=i("all"),a=i(1),y=10,b=i(!1),M=i(""),B=d(()=>[...new Set(f.finds.map(o=>o.findCity))]),P=d(()=>f.finds.reduce((o,e)=>o+(parseInt(e.amount_check)||0),0)),v=d(()=>{let o=f.finds;if(x.value){const e=x.value.toLowerCase();o=o.filter(s=>s.fullName.toLowerCase().includes(e)||s.findCity.toLowerCase().includes(e)||s.ward.toLowerCase().includes(e)||s.piece.name.toLowerCase().includes(e))}return m.value!=="all"&&(o=o.filter(e=>e.approval_status===parseInt(m.value))),g.value!=="all"&&(o=o.filter(e=>e.findCity===g.value)),o}),j=d(()=>Math.ceil(v.value.length/y));d(()=>{const o=(a.value-1)*y,e=o+y;return v.value.slice(o,e)});const z=o=>{try{return`/storage/findImages/${JSON.parse(o)[0]}`}catch(e){return console.error("Erreur lors du parsing des photos:",e),""}},S=o=>new Date(o).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"}),V=o=>{try{const e=JSON.parse(o);M.value=`/storage/findImages/${e[0]}`,b.value=!0}catch(e){console.error("Erreur lors du parsing des photos:",e)}},D=o=>{confirm("Êtes-vous sûr de vouloir supprimer cette pièce ?")&&console.log("Supprimer la pièce:",o)};return(o,e)=>(n(),r(w,null,[u(c(R),{title:"Admin - Pièces Retrouvées"}),u(c($),null,{HeaderAdmin:h(()=>[t("ul",E,[t("li",null,[u(c(C),{href:o.route("admin.index"),class:"text-gray-500 hover:text-blue-600"},{default:h(()=>e[6]||(e[6]=[N("Dashboard")])),_:1},8,["href"])]),e[7]||(e[7]=t("li",{class:"text-gray-500"},"/",-1)),e[8]||(e[8]=t("li",{class:"text-blue-600"},"Pièces Retrouvées",-1))])]),_:1}),t("div",O,[t("div",U,[t("div",J,[e[10]||(e[10]=t("div",{class:"bg-blue-50 p-3 rounded-full"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",Q,[e[9]||(e[9]=t("h3",{class:"text-lg font-semibold"},"Total Pièces",-1)),t("p",q,l(p.finds.length),1)])])]),t("div",G,[t("div",K,[e[12]||(e[12]=t("div",{class:"bg-green-50 p-3 rounded-full"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",W,[e[11]||(e[11]=t("h3",{class:"text-lg font-semibold"},"Retrouvées",-1)),t("p",X,l(p.finds.filter(s=>s.approval_status===1).length),1)])])]),t("div",Y,[t("div",Z,[e[14]||(e[14]=t("div",{class:"bg-yellow-50 p-3 rounded-full"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-yellow-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",tt,[e[13]||(e[13]=t("h3",{class:"text-lg font-semibold"},"En Attente",-1)),t("p",et,l(p.finds.filter(s=>s.approval_status===0).length),1)])])]),t("div",st,[t("div",ot,[e[16]||(e[16]=t("div",{class:"bg-purple-50 p-3 rounded-full"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6 text-purple-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t("div",lt,[e[15]||(e[15]=t("h3",{class:"text-lg font-semibold"},"Montant Total",-1)),t("p",rt,l(P.value)+" FCFA",1)])])])]),t("div",nt,[t("div",at,[t("div",it,[t("div",dt,[t("div",ut,[_(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=s=>x.value=s),placeholder:"Rechercher...",class:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:border-blue-500"},null,512),[[H,x.value]]),e[17]||(e[17]=t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-gray-400 absolute left-3 top-2.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})],-1))])]),t("div",ct,[_(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>m.value=s),class:"border rounded-lg px-4 py-2 focus:outline-none focus:border-blue-500"},e[18]||(e[18]=[t("option",{value:"all"},"Tous les statuts",-1),t("option",{value:"1"},"Retrouvée",-1),t("option",{value:"0"},"En attente",-1)]),512),[[L,m.value]]),_(t("select",{"onUpdate:modelValue":e[2]||(e[2]=s=>g.value=s),class:"border rounded-lg px-4 py-2 focus:outline-none focus:border-blue-500"},[e[19]||(e[19]=t("option",{value:"all"},"Toutes les villes",-1)),(n(!0),r(w,null,k(B.value,s=>(n(),r("option",{key:s,value:s},l(s),9,pt))),128))],512),[[L,g.value]])])])])]),t("div",xt,[t("div",mt,[e[24]||(e[24]=t("div",{class:"flex items-center justify-between mb-4"},[t("h2",{class:"text-xl font-semibold text-gray-800"},"Liste des Pièces"),t("button",{class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors"}," Exporter ")],-1)),t("div",gt,[t("table",vt,[e[23]||(e[23]=t("thead",{class:"bg-gray-50"},[t("tr",null,[t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Propriétaire"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Ville "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Quartier"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Photo "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Statut"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Type "),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Trouveur"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Montant"),t("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Date "),t("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions")])],-1)),t("tbody",ht,[(n(!0),r(w,null,k(v.value,s=>(n(),r("tr",{key:s.id,class:"hover:bg-gray-50"},[t("td",wt,[t("div",ft,l(s.fullName),1)]),t("td",yt,l(s.findCity),1),t("td",bt,l(s.ward),1),t("td",_t,[t("img",{src:z(s.photos),alt:"",class:"w-16 h-16 rounded-lg object-cover cursor-pointer hover:scale-150 transition-transform",onClick:A=>V(s.photos)},null,8,kt)]),t("td",Ct,[t("span",{class:F(["px-2 inline-flex text-xs leading-5 font-semibold rounded-full",s.approval_status===1?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"])},l(s.approval_status===1?"Retrouvée":"En attente"),3)]),t("td",Mt,l(s.piece.name),1),t("td",jt,[t("div",At,l(s.user.name),1)]),t("td",Lt,[t("div",Ft,l(s.amount_check)+" FCFA",1)]),t("td",Bt,l(S(s.created_at)),1),t("td",Pt,[u(c(C),{href:o.route("admin.find.show",s.id),class:"text-blue-600 hover:text-blue-900"},{default:h(()=>e[20]||(e[20]=[t("span",{class:"flex items-center"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]),t("span",{class:"ml-1"},"Détails")],-1)])),_:2},1032,["href"]),u(c(C),{href:o.route("admin.find.edit",s.id),class:"text-indigo-600 hover:text-indigo-900"},{default:h(()=>e[21]||(e[21]=[t("span",{class:"flex items-center"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})]),t("span",{class:"ml-1"},"Modifier")],-1)])),_:2},1032,["href"]),t("button",{onClick:A=>D(s),class:"text-red-600 hover:text-red-900"},e[22]||(e[22]=[t("span",{class:"flex items-center"},[t("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})]),t("span",{class:"ml-1"},"Supprimer")],-1)]),8,zt)])]))),128))])])]),t("div",St,[t("div",Vt," Affichage de "+l(v.value.length)+" résultats ",1),t("div",Dt,[t("button",{class:"px-3 py-1 text-sm bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200",disabled:a.value===1,onClick:e[3]||(e[3]=s=>a.value--)}," Précédent ",8,Ht),(n(!0),r(w,null,k(j.value,s=>(n(),r("button",{key:s,class:F(["px-3 py-1 text-sm rounded-md",a.value===s?"bg-blue-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"]),onClick:A=>a.value=s},l(s),11,It))),128)),t("button",{class:"px-3 py-1 text-sm bg-gray-100 text-gray-600 rounded-md hover:bg-gray-200",disabled:a.value===j.value,onClick:e[4]||(e[4]=s=>a.value++)}," Suivant ",8,Nt)])])])]),b.value?(n(),r("div",{key:0,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e[5]||(e[5]=s=>b.value=!1)},[t("img",{src:M.value,class:"max-w-3xl max-h-[80vh] rounded-lg",alt:""},null,8,Rt)])):I("",!0)],64))}});export{Gt as default};
